{"version":3,"sources":["blocks/contact-block.js"],"names":["ContactBlock","$form","$cont","find","$formBtn","$formMessage","length","on","$","proxy","formSubmit","off","e","TweenLite","to","height","ajax","url","currentTarget","action","data","serialize","type","dataType","success","log","debug","status","className","innerHTML","message","actual","delay","error","responseJSON","errors","preventDefault","AbstractBlock"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAcaA,Y,WAAAA,Y;;;;;;;;;;;AAAqC;;mCAEvC;AACH;;AAEA,qBAAKC,KAAL,GAAa,KAAKC,KAAL,CAAWC,IAAX,CAAgB,MAAhB,CAAb;AACA,qBAAKC,QAAL,GAAgB,KAAKH,KAAL,CAAWE,IAAX,CAAgB,QAAhB,CAAhB;AACA,qBAAKE,YAAL,GAAoB,KAAKH,KAAL,CAAWC,IAAX,CAAgB,eAAhB,CAApB;AACH;;;yCAEY;AACT;;AAEA,oBAAG,KAAKF,KAAL,CAAWK,MAAd,EAAsB,KAAKL,KAAL,CAAWM,EAAX,CAAc,QAAd,EAAwBC,iBAAEC,KAAF,CAAQ,KAAKC,UAAb,EAAyB,IAAzB,CAAxB;AACzB;;;4CAEe;AACZ;;AAEA,oBAAG,KAAKT,KAAL,CAAWK,MAAd,EAAsB,KAAKL,KAAL,CAAWU,GAAX,CAAe,QAAf,EAAyBH,iBAAEC,KAAF,CAAQ,KAAKC,UAAb,EAAyB,IAAzB,CAAzB;AACzB;;;uCAEUE,C,EAAG;AAAA;;AAEVC,0BAAUC,EAAV,CAAa,KAAKT,YAAlB,EAAgC,GAAhC,EAAqC,EAACU,QAAO,CAAR,EAArC;;AAEAP,iCAAEQ,IAAF,CAAO;AACHC,yBAAKL,EAAEM,aAAF,CAAgBC,MADlB;AAEHC,0BAAO,KAAKnB,KAAL,CAAWoB,SAAX,EAFJ;AAGHC,0BAAM,MAHH;AAIHC,8BAAU,MAJP;AAKHC,6BAAS,iBAACJ,IAAD,EAAU;AACfK,2CAAIC,KAAJ,CAAU,SAAV;AACAD,2CAAIC,KAAJ,CAAUN,KAAKO,MAAf;AACA,4BAAIP,KAAKO,MAAL,IAAe,SAAnB,EAA8B;AAC1B,mCAAKtB,YAAL,CAAkB,CAAlB,EAAqBuB,SAArB,GAAiC,+BAA6BR,KAAKO,MAAnE;AACA,mCAAKtB,YAAL,CAAkB,CAAlB,EAAqBwB,SAArB,GAAiC,WAAST,KAAKU,OAAd,GAAsB,SAAvD;AAEH,yBAJD,MAIO;AACH,mCAAKzB,YAAL,CAAkB,CAAlB,EAAqBuB,SAArB,GAAiC,mDAAiDR,KAAKO,MAAvF;AACA,mCAAKtB,YAAL,CAAkB,CAAlB,EAAqBwB,SAArB,GAAiC,WAAST,KAAKU,OAAd,GAAsB,SAAvD;AACH;;AAED,4BAAIf,SAAS,OAAKV,YAAL,CAAkBF,IAAlB,CAAuB,MAAvB,EAA+B4B,MAA/B,CAAsC,aAAtC,CAAb;AACAlB,kCAAUC,EAAV,CAAa,OAAKT,YAAlB,EAAgC,GAAhC,EAAqC,EAACU,QAAOA,MAAR,EAAgBiB,OAAM,GAAtB,EAArC;AAEH,qBApBE;AAqBHC,2BAAO,eAACb,IAAD,EAAU;AACbK,2CAAIC,KAAJ,CAAU,OAAV;AACAN,+BAAOA,KAAKc,YAAZ;AACAT,2CAAIC,KAAJ,CAAUN,IAAV;AACA,+BAAKf,YAAL,CAAkB,CAAlB,EAAqBuB,SAArB,GAAiC,sEAAoER,KAAKO,MAA1G;AACA,+BAAKtB,YAAL,CAAkB,CAAlB,EAAqBwB,SAArB,GAAiC,WAAST,KAAKe,MAAd,GAAqB,SAAtD;;AAEA,4BAAIpB,SAAS,OAAKV,YAAL,CAAkBF,IAAlB,CAAuB,MAAvB,EAA+B4B,MAA/B,CAAsC,aAAtC,CAAb;AACAlB,kCAAUC,EAAV,CAAa,OAAKT,YAAlB,EAAgC,GAAhC,EAAqC,EAACU,QAAOA,MAAR,EAAgBiB,OAAM,GAAtB,EAArC;AACH;AA9BE,iBAAP;;AAiCApB,kBAAEwB,cAAF;AACH;;;;MA5D6BC,4B","file":"contact-block.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file contact-block.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\n\nimport $ from \"jquery\";\nimport TweenMax from \"TweenMax\";\nimport log from \"loglevel\";\nimport {AbstractBlock} from \"abstract-block\";\n// import {DefaultBlock} from \"blocks/default-block\";\n\nexport class ContactBlock extends AbstractBlock { // extends DefaultBlock\n\n    init() {\n        super.init();\n\n        this.$form = this.$cont.find('form');\n        this.$formBtn = this.$form.find('button');\n        this.$formMessage = this.$cont.find('.form-message');\n    }\n\n    initEvents() {\n        super.initEvents();\n\n        if(this.$form.length) this.$form.on('submit', $.proxy(this.formSubmit, this));\n    }\n\n    destroyEvents() {\n        super.destroyEvents();\n\n        if(this.$form.length) this.$form.off('submit', $.proxy(this.formSubmit, this));\n    }\n\n    formSubmit(e) {\n\n        TweenLite.to(this.$formMessage, 0.4, {height:0});\n\n        $.ajax({\n            url: e.currentTarget.action,\n            data : this.$form.serialize(),\n            type: 'post',\n            dataType: 'json',\n            success: (data) => {\n                log.debug('SUCCESS');\n                log.debug(data.status);\n                if (data.status != 'success') {\n                    this.$formMessage[0].className = 'form-message form-message-'+data.status;\n                    this.$formMessage[0].innerHTML = '<span>'+data.message+'</span>';\n\n                } else {\n                    this.$formMessage[0].className = 'form-message form-message-hidden form-message-'+data.status;\n                    this.$formMessage[0].innerHTML = '<span>'+data.message+'</span>';\n                }\n\n                var height = this.$formMessage.find('span').actual('outerHeight');\n                TweenLite.to(this.$formMessage, 0.6, {height:height, delay:0.2});\n\n            },\n            error: (data) => {\n                log.debug('ERROR');\n                data = data.responseJSON;\n                log.debug(data);\n                this.$formMessage[0].className = 'form-message form-message-hidden form-message-error form-message-'+data.status;\n                this.$formMessage[0].innerHTML = '<span>'+data.errors+'</span>';\n\n                var height = this.$formMessage.find('span').actual('outerHeight');\n                TweenLite.to(this.$formMessage, 0.6, {height:height, delay:0.2});\n            }\n        });\n\n        e.preventDefault();\n    }\n\n}\n\n"]}