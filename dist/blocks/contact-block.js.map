{"version":3,"sources":["blocks/contact-block.js"],"names":["ContactBlock","$form","$cont","find","$formBtn","$formMessage","length","on","proxy","formSubmit","off","e","TweenLite","to","height","ajax","url","currentTarget","action","data","serialize","type","dataType","success","debug","status","className","innerHTML","message","actual","delay","error","responseJSON","errors","preventDefault"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAcaA,Y,WAAAA,Y;;;;;;;;;;;AAAqC;;mCAEvC;AACH;;AAEA,qBAAKC,KAAL,GAAa,KAAKC,KAAL,CAAWC,IAAX,CAAgB,MAAhB,CAAb;AACA,qBAAKC,QAAL,GAAgB,KAAKH,KAAL,CAAWE,IAAX,CAAgB,QAAhB,CAAhB;AACA,qBAAKE,YAAL,GAAoB,KAAKH,KAAL,CAAWC,IAAX,CAAgB,eAAhB,CAApB;AACH;;;yCAEY;AACT;;AAEA,oBAAG,KAAKF,KAAL,CAAWK,MAAd,EAAsB,KAAKL,KAAL,CAAWM,EAAX,CAAc,QAAd,EAAwB,iBAAEC,KAAF,CAAQ,KAAKC,UAAb,EAAyB,IAAzB,CAAxB;AACzB;;;4CAEe;AACZ;;AAEA,oBAAG,KAAKR,KAAL,CAAWK,MAAd,EAAsB,KAAKL,KAAL,CAAWS,GAAX,CAAe,QAAf,EAAyB,iBAAEF,KAAF,CAAQ,KAAKC,UAAb,EAAyB,IAAzB,CAAzB;AACzB;;;uCAEUE,C,EAAG;AAAA;;AAEVC,0BAAUC,EAAV,CAAa,KAAKR,YAAlB,EAAgC,GAAhC,EAAqC,EAACS,QAAO,CAAR,EAArC;;AAEA,iCAAEC,IAAF,CAAO;AACHC,yBAAKL,EAAEM,aAAF,CAAgBC,MADlB;AAEHC,0BAAO,KAAKlB,KAAL,CAAWmB,SAAX,EAFJ;AAGHC,0BAAM,MAHH;AAIHC,8BAAU,MAJP;AAKHC,6BAAS,iBAACJ,IAAD,EAAU;AACf,2CAAIK,KAAJ,CAAU,SAAV;AACA,2CAAIA,KAAJ,CAAUL,KAAKM,MAAf;AACA,4BAAIN,KAAKM,MAAL,IAAe,SAAnB,EAA8B;AAC1B,mCAAKpB,YAAL,CAAkB,CAAlB,EAAqBqB,SAArB,GAAiC,+BAA6BP,KAAKM,MAAnE;AACA,mCAAKpB,YAAL,CAAkB,CAAlB,EAAqBsB,SAArB,GAAiC,WAASR,KAAKS,OAAd,GAAsB,SAAvD;AAEH,yBAJD,MAIO;AACH,mCAAKvB,YAAL,CAAkB,CAAlB,EAAqBqB,SAArB,GAAiC,mDAAiDP,KAAKM,MAAvF;AACA,mCAAKpB,YAAL,CAAkB,CAAlB,EAAqBsB,SAArB,GAAiC,WAASR,KAAKS,OAAd,GAAsB,SAAvD;AACH;;AAED,4BAAId,SAAS,OAAKT,YAAL,CAAkBF,IAAlB,CAAuB,MAAvB,EAA+B0B,MAA/B,CAAsC,aAAtC,CAAb;AACAjB,kCAAUC,EAAV,CAAa,OAAKR,YAAlB,EAAgC,GAAhC,EAAqC,EAACS,QAAOA,MAAR,EAAgBgB,OAAM,GAAtB,EAArC;AAEH,qBApBE;AAqBHC,2BAAO,eAACZ,IAAD,EAAU;AACb,2CAAIK,KAAJ,CAAU,OAAV;AACAL,+BAAOA,KAAKa,YAAZ;AACA,2CAAIR,KAAJ,CAAUL,IAAV;AACA,+BAAKd,YAAL,CAAkB,CAAlB,EAAqBqB,SAArB,GAAiC,sEAAoEP,KAAKM,MAA1G;AACA,+BAAKpB,YAAL,CAAkB,CAAlB,EAAqBsB,SAArB,GAAiC,WAASR,KAAKc,MAAd,GAAqB,SAAtD;;AAEA,4BAAInB,SAAS,OAAKT,YAAL,CAAkBF,IAAlB,CAAuB,MAAvB,EAA+B0B,MAA/B,CAAsC,aAAtC,CAAb;AACAjB,kCAAUC,EAAV,CAAa,OAAKR,YAAlB,EAAgC,GAAhC,EAAqC,EAACS,QAAOA,MAAR,EAAgBgB,OAAM,GAAtB,EAArC;AACH;AA9BE,iBAAP;;AAiCAnB,kBAAEuB,cAAF;AACH","file":"contact-block.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file contact-block.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\n\nimport $ from \"jquery\";\nimport TweenMax from \"TweenMax\";\nimport log from \"loglevel\";\nimport {AbstractBlock} from \"abstract-block\";\n// import {DefaultBlock} from \"blocks/default-block\";\n\nexport class ContactBlock extends AbstractBlock { // extends DefaultBlock\n\n    init() {\n        super.init();\n\n        this.$form = this.$cont.find('form');\n        this.$formBtn = this.$form.find('button');\n        this.$formMessage = this.$cont.find('.form-message');\n    }\n\n    initEvents() {\n        super.initEvents();\n\n        if(this.$form.length) this.$form.on('submit', $.proxy(this.formSubmit, this));\n    }\n\n    destroyEvents() {\n        super.destroyEvents();\n\n        if(this.$form.length) this.$form.off('submit', $.proxy(this.formSubmit, this));\n    }\n\n    formSubmit(e) {\n\n        TweenLite.to(this.$formMessage, 0.4, {height:0});\n\n        $.ajax({\n            url: e.currentTarget.action,\n            data : this.$form.serialize(),\n            type: 'post',\n            dataType: 'json',\n            success: (data) => {\n                log.debug('SUCCESS');\n                log.debug(data.status);\n                if (data.status != 'success') {\n                    this.$formMessage[0].className = 'form-message form-message-'+data.status;\n                    this.$formMessage[0].innerHTML = '<span>'+data.message+'</span>';\n\n                } else {\n                    this.$formMessage[0].className = 'form-message form-message-hidden form-message-'+data.status;\n                    this.$formMessage[0].innerHTML = '<span>'+data.message+'</span>';\n                }\n\n                var height = this.$formMessage.find('span').actual('outerHeight');\n                TweenLite.to(this.$formMessage, 0.6, {height:height, delay:0.2});\n\n            },\n            error: (data) => {\n                log.debug('ERROR');\n                data = data.responseJSON;\n                log.debug(data);\n                this.$formMessage[0].className = 'form-message form-message-hidden form-message-error form-message-'+data.status;\n                this.$formMessage[0].innerHTML = '<span>'+data.errors+'</span>';\n\n                var height = this.$formMessage.find('span').actual('outerHeight');\n                TweenLite.to(this.$formMessage, 0.6, {height:height, delay:0.2});\n            }\n        });\n\n        e.preventDefault();\n    }\n\n}\n\n"]}