{"version":3,"sources":["common/nav.js"],"names":["Nav","$cont","$list","$item","find","$link","$links","not","$btn","$overlay","minifyLimit","BootstrapMedia","isMinMD","opened","router","options","ajaxEnabled","on","onLinkClick","bind","btnClick","close","window","addEventListener","onScroll","onResize","off","removeEventListener","e","scrollY","minified","minify","unminify","Utils","addClass","document","body","removeClass","isMinSM","open","style","display","TweenLite","fromTo","xPercent","to","opacity","onComplete","AbstractNav"],"mappings":"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","file":"nav.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file nav.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\nimport $ from 'jquery';\nimport {Utils} from \"utils/utils\";\nimport {BootstrapMedia} from \"utils/bootstrapMedia\";\nimport {debounce} from \"utils/debounce\";\nimport {AbstractNav} from 'abstract-nav';\n\n/**\n *\n */\nexport class Nav extends AbstractNav {\n    constructor() {\n        super();\n\n        this.$cont = $('#nav');\n        this.$list = $('#nav-list');\n        this.$item = this.$list.find('.nav-item');\n        this.$link = this.$list.find('.nav-link');\n        this.$links = this.$cont.find('a').not('[target=\"_blank\"]');\n\n        this.$btn = $('#nav-btn');\n        this.$overlay = $('#nav-overlay');\n\n        this.minifyLimit = BootstrapMedia.isMinMD() ? 165 : 50;\n\n        this.opened = false;\n    }\n\n    initEvents(router) {\n        super.initEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.on('click', router.onLinkClick.bind(router));\n        }\n\n        this.$btn.on('click', this.btnClick.bind(this));\n        this.$overlay.on('click', this.close.bind(this));\n\n        window.addEventListener('scroll', this.onScroll.bind(this));\n        window.addEventListener('resize', debounce(this.onResize.bind(this), 100, false));\n    }\n\n    destroyEvents(router) {\n\n        super.destroyEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.off('click', router.onLinkClick.bind(router));\n        }\n\n        this.$btn.off('click', this.btnClick.bind(this));\n        this.$overlay.off('click', this.close.bind(this));\n\n        window.removeEventListener('scroll', this.onScroll.bind(this));\n        window.removeEventListener('resize', debounce(this.onResize.bind(this), 100, false));\n    }\n\n    /**\n     * Scroll\n     */\n    onScroll(e) {\n\n        if(window.scrollY > this.minifyLimit){\n            if(!this.minified) this.minify();\n        }\n        else{\n            if(this.minified) this.unminify();\n        }\n    }\n\n    minify() {\n\n        Utils.addClass(document.body,'nav-minified');\n        this.minified = true;\n    }\n\n    unminify() {\n\n        Utils.removeClass(document.body,'nav-minified');\n        this.minified = false;\n    }\n\n\n    /**\n     * Btn click\n     */\n    btnClick(e) {\n        if(!BootstrapMedia.isMinSM()) {\n            if(!this.opened) this.open();\n            else this.close();\n        }\n    }\n\n    open() {\n        if(!BootstrapMedia.isMinSM() && !this.opened){\n\n            this.$cont[0].style.display = 'block';\n            TweenLite.fromTo(this.$cont, 0.4, {xPercent:-100}, {xPercent:0});\n\n            this.$overlay[0].style.display = 'block';\n            TweenLite.to(this.$overlay, 1.2, {opacity:1});\n\n            this.opened = true;\n        }\n    }\n\n    close() {\n        if(!BootstrapMedia.isMinSM() && this.opened){\n\n            TweenLite.to(this.$cont, 0.4, {xPercent:-100, onComplete: () => {\n                if(!this.opened) this.$cont[0].style.display = 'none';\n               // document.body.removeAttribute('style');\n            }});\n\n            TweenLite.to(this.$overlay, 1.2, {opacity:0, onComplete: () => {\n                this.$overlay[0].style.display = 'none';\n            }});\n\n            this.opened = false;\n        }\n    }\n\n    onResize() {\n\n    }\n}\n"]}