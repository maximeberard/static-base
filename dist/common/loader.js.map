{"version":3,"sources":["common/loader.js"],"names":["Loader","console","log","$cont","$inner","Scroll","disable","context","$body","isHome","className","indexOf","active","showStatic","TweenLite","to","window","scrollTo","y","autokill","Utils","addClass","setTimeout","viewportSize","getViewportSize","style","display","fromTo","height","delay","hideDelay","scrollTop","removeClass","onComplete","onHidden","set","x","enable"],"mappings":"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","file":"loader.js","sourcesContent":["/**\n * Copyright Maxime BÃ©rard 2020\n *\n * @file loader.js\n * @copyright Maxime BÃ©rard 2020\n * @author Maxime BÃ©rard\n */\nimport $ from 'jquery';\nimport {TweenMax} from \"TweenMax\";\nimport scrollTo from \"scrollTo\";\nimport {Utils} from \"utils/utils\";\nimport {Scroll} from 'utils/scroll';\nimport {BootstrapMedia} from \"utils/bootstrapMedia\";\n\nexport class Loader {\n\n    constructor() {\n        console.log('ðŸŒ€ LOADER INIT');\n\n        this.$cont = $('#loading');\n        this.$inner = $('#loading-inner');\n\n        Scroll.disable(); // enable();\n        // console.log('SCROLL DISABLE');\n        // $(window).scrollTop(0);\n        // TweenLite.to(window, 0.6, {scrollTo:{y:0, autokill:false}});\n\n        this.context = 'static';\n        this.$body = $('body');\n\n        this.isHome = (this.$body[0].className.indexOf('home') >= 0);\n\n        this.active = true;\n\n        this.showStatic();\n    }\n\n    showStatic () {\n        // console.log('ðŸŒ€ LOADER SHOW STATIC');\n        TweenLite.to(window, 0.6, {scrollTo:{y:0, autokill:false}});\n\n        Utils.addClass(this.$body[0],'loading-active');\n        Utils.addClass(this.$body[0],'static');\n    }\n\n    show () {\n\n        setTimeout(() => {\n            // console.log('ðŸŒ€ LOADER SHOW');\n            \n            let viewportSize = Utils.getViewportSize();\n                \n            this.$cont[0].style.display = 'block';\n            TweenLite.fromTo(this.$cont, 1,  {y:viewportSize.height}, {y:0});\n            TweenLite.fromTo(this.$inner, 1, {y:-viewportSize.height}, {y:0});\n            \n            this.active = true;\n\n            Scroll.disable();\n            TweenLite.to(window, 0.6, {scrollTo:{y:0}, delay:0.4, autokill:false});\n\n            setTimeout(() => {\n                Utils.addClass(this.$body[0], 'loading-active');\n            }, 1000);\n\n        }, 50);\n    }\n\n    hide () {\n        // console.log('ðŸŒ€ LOADER HIDE');\n\n        let hideDelay = 0.6;\n        if (this.context == 'static' && this.isHome) hideDelay = 1.6;\n\n        $(window).scrollTop(0);\n        TweenLite.to(window, 0.6, {scrollTo:{y:0, autokill:false}});\n        Utils.removeClass(this.$body[0],'loading-active');\n        \n        // console.log('ðŸŒ€ LOADER HIDE ANIM');\n        let viewportSize = Utils.getViewportSize();\n\n        if (this.context == 'static'){\n        }\n        // else this.onHidden();\n            \n        TweenLite.to(this.$inner, 1, {y:viewportSize.height, delay:hideDelay});\n        TweenLite.to(this.$cont, 1, {y:-viewportSize.height, delay:hideDelay, onComplete: () => {\n            this.onHidden();\n        }});\n    }\n\n    onHidden () {\n        // console.log('ðŸŒ€ LOADER ON HIDDEN');\n        this.active = false;\n\n        this.$cont[0].style.display = 'none';\n        TweenLite.set(this.$cont, {x:0, y:0});\n        TweenLite.set(this.$inner, {x:0, y:0});\n        // console.log('SCROLL ENABLE');\n        // $(window).scrollTop(0);\n        Scroll.enable();\n\n        if (this.context == 'static') {\n            this.context = 'ajax';\n            Utils.removeClass(this.$body[0],'static');\n            Utils.addClass(this.$body[0],'ajax');\n            Utils.addClass(this.$cont[0], 'loading-ajax');\n            if (this.isHome) this.isHome = false;\n        }\n    }\n}\n"]}